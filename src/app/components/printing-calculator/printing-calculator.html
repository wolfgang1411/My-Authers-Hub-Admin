<form
  [formGroup]="form"
  class="grid grid-cols-1 md:grid-cols-2 gap-6 p-6 bg-white rounded shadow"
>
  <!-- Section: Basic Information -->
  <div class="col-span-2">
    <h2 class="text-lg font-medium mb-2 text-text-primary">
      Basic Information
    </h2>
    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
      <!-- Total Pages -->
      <mat-form-field class="w-full">
        <mat-label>{{ "totalpages" | translate }}</mat-label>
        <input matInput type="number" formControlName="totalPages" />
      </mat-form-field>

      <!-- Color Pages -->
      <mat-form-field class="w-full">
        <mat-label>{{ "colourpages" | translate }}</mat-label>
        <input matInput type="number" formControlName="colorPages" />
      </mat-form-field>

      <!-- Quantity -->
      <mat-form-field class="w-full">
        <mat-label>{{ "quantity" | translate }}</mat-label>
        <input matInput type="number" formControlName="quantity" />
      </mat-form-field>
    </div>
  </div>

  <!-- Section: Options With Update Buttons -->
  <div class="col-span-2">
    <h2 class="text-lg font-medium mt-4 mb-2 text-text-primary">
      Customization Options
    </h2>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <!-- Size Category - First -->
      <div class="flex gap-2 items-center">
        <mat-form-field class="flex-1">
          <mat-label>{{ "sizecategory" | translate }}</mat-label>
          <mat-select formControlName="sizeCategoryId">
            @for (size of sizeTypes(); track size.id) {
            <mat-option [value]="size.id">{{ size.size }}</mat-option>
            }
          </mat-select>
        </mat-form-field>
        @if (isSuperAdmin()) {
        <button
          type="button"
          matButton="filled"
          mat-button
          class="!bg-primary"
          (click)="updateRate('sizeType')"
        >
          {{ "updaterate" | translate }}
        </button>
        }
      </div>

      <!-- Binding Type -->
      <div class="flex gap-2 items-center">
        <mat-form-field class="flex-1">
          <mat-label>{{ "bindingtype" | translate }}</mat-label>
          <mat-select formControlName="bindingTypeId" [disabled]="!isSizeCategorySelected()">
            @for (type of filteredBindingTypes(); track type.id) {
            <mat-option [value]="type.id">{{ type.name }}</mat-option>
            }
          </mat-select>
        </mat-form-field>
        @if (isSuperAdmin()) {
        <button
          type="button"
          mat-button
          matButton="filled"
          class="!bg-primary"
          (click)="updateRate('bidingType')"
        >
          {{ "updaterate" | translate }}
        </button>
        }
      </div>

      <!-- Paper Quality -->
      <div class="flex gap-2 items-center">
        <mat-form-field class="flex-1">
          <mat-label>{{ "papertype" | translate }}</mat-label>
          <mat-select formControlName="paperQuailtyId" [disabled]="!isSizeCategorySelected()">
            @for (paper of filteredPaperQualityTypes(); track paper.id) {
            <mat-option [value]="paper.id">{{ paper.name }}</mat-option>
            }
          </mat-select>
        </mat-form-field>
        @if (isSuperAdmin()) {
        <button
          type="button"
          mat-button
          matButton="filled"
          class="!bg-primary"
          (click)="updateRate('paperQualityType')"
        >
          {{ "updaterate" | translate }}
        </button>
        }
      </div>

      <!-- Lamination Type -->
      <div class="flex gap-2 items-center">
        <mat-form-field class="flex-1">
          <mat-label>{{ "laminationtype" | translate }}</mat-label>
          <mat-select formControlName="laminationTypeId" [disabled]="!isSizeCategorySelected()">
            @for (lamination of filteredLaminationTypes(); track lamination.id) {
            <mat-option [value]="lamination.id">{{
              lamination.name
            }}</mat-option>
            }
          </mat-select>
        </mat-form-field>
        @if (isSuperAdmin()) {
        <button
          type="button"
          matButton="filled"
          mat-button
          class="!bg-primary"
          (click)="updateRate('laminationType')"
        >
          {{ "updaterate" | translate }}
        </button>
        }
      </div>
    </div>
  </div>

  <!-- Section: Options Checkboxes -->
  <div class="col-span-2">
    <h2 class="text-lg font-medium mt-4 mb-2 text-text-primary">
      Other Options
    </h2>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <!-- Inside Cover -->
      <div class="flex items-center gap-4">
        <mat-checkbox formControlName="insideCover">
          {{ "isinsidecover" | translate }}
        </mat-checkbox>
        @if (isSizeCategorySelected() && isSuperAdmin()) {
        <span class="text-sm text-gray-600">
          ({{ selectedSizeCategoryInsideCoverPrice() | currency : "INR" }})
        </span>
        }
      </div>

      <!-- Random Color Pages -->
      <mat-checkbox formControlName="isColorPagesRandom">
        {{ "iscolorpagesrandom" | translate }}
      </mat-checkbox>
    </div>
  </div>

  <!-- Section: Margin Percent (SuperAdmin Only) -->
  @if (isSuperAdmin()) {
  <div class="col-span-2">
    <h2 class="text-lg font-medium mt-4 mb-2 text-text-primary">
      Margin Settings
    </h2>
    <div class="flex gap-2 items-center">
      <mat-form-field class="flex-1">
        <mat-label>{{ "marginpercent" | translate }}</mat-label>
        <input matInput type="number" [value]="marginPercent()" readonly />
      </mat-form-field>
      <button
        type="button"
        matButton="filled"
        mat-button
        class="!bg-primary"
        (click)="updateRate('marginPercent')"
      >
        {{ "updaterate" | translate }}
      </button>
    </div>
  </div>
  }

  <!-- Section: Cost Calculation -->
  <div
    class="bg-primary-light border border-purple-700 rounded-lg p-6 shadow-md"
  >
    <h2 class="text-lg font-medium text-text-heading mb-4">Cost Breakdown</h2>
    <div class="grid grid-cols-2 gap-4 gap-x-8 text-sm text-gray-700">
      <!-- Printing Per Item -->
      <div class="flex justify-between">
        <span>Printing Per Item :</span>
        <span class="font-medium text-gray-900">
          {{ calculation()?.printPerItem | currency : "INR" }}
        </span>
      </div>

      <!-- Weight Per Item -->
      <div class="flex justify-between">
        <span>Weight Per Item :</span>
        <span class="font-medium text-gray-900">
          {{ calculation()?.deliveryWeightPerItem || "N/A" }} kg
        </span>
      </div>

      <!-- Delivery -->
      <div class="flex justify-between">
        <span>Delivery Cost :</span>
        <span class="font-medium text-gray-900">
          {{ calculation()?.deliveryCost | currency : "INR" }}
        </span>
      </div>

      <!-- Total Weight -->
      <div class="flex justify-between">
        <span>Total Weight :</span>
        <span class="font-medium text-gray-900">
          {{ calculation()?.deliveryWeight || "N/A" }} kg
        </span>
      </div>

      <!-- Total Printing Cost -->
      <div
        class="col-span-2 flex justify-between border-t pt-4 mt-2 font-semibold text-base text-text-heading"
      >
        <span>Total Printing</span>
        <span>{{ calculation()?.printCost | currency : "INR" }}</span>
      </div>
    </div>
  </div>
</form>
