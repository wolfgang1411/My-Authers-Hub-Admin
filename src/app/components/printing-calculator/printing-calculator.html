<section
  class="bg-white rounded-xl p-6 shadow-[0_10px_25px_rgba(61,26,93,0.08)] border border-[#ceb8ef]"
>
  <div class="flex items-center justify-between gap-4 mb-6 flex-wrap">
    <div>
      <h2 class="text-xl font-semibold text-[var(--text-heading)]">
        {{ "printingcalculator" | translate }}
      </h2>
      <p class="mt-1 text-[#475569] text-[0.95rem]">
        Calculate printing costs based on book specifications and options.
      </p>
    </div>
  </div>

  <form class="flex flex-col gap-6" [formGroup]="form">
    <!-- Section: Basic Information -->
    <div>
      <h3 class="text-base font-semibold mb-3 text-[var(--text-heading)]">
        Basic Information
      </h3>
      <div class="grid gap-4 md:grid-cols-2">
        <div class="flex flex-col gap-[0.35rem]">
          <label class="text-[0.9rem] text-[#0f172a] font-medium">
            {{ "totalpages" | translate }}
          </label>
          <mat-form-field appearance="fill" class="w-full">
            <mat-icon matPrefix>description</mat-icon>
            <input
              type="number"
              matInput
              min="0"
              formControlName="totalPages"
            />
          </mat-form-field>
        </div>

        <div class="flex flex-col gap-[0.35rem]">
          <label class="text-[0.9rem] text-[#0f172a] font-medium">
            {{ "colourpages" | translate }}
          </label>
          <mat-form-field appearance="fill" class="w-full">
            <mat-icon matPrefix>color_lens</mat-icon>
            <input
              type="number"
              matInput
              min="0"
              formControlName="colorPages"
            />
          </mat-form-field>
        </div>
      </div>
    </div>

    <!-- Section: Customization Options -->
    <div>
      <h3 class="text-base font-semibold mb-3 text-[var(--text-heading)]">
        Customization Options
      </h3>
      <div class="grid gap-4 md:grid-cols-2">
        <mat-form-field appearance="fill" class="w-full">
          <mat-icon matPrefix>straighten</mat-icon>
          <mat-label>{{ "sizecategory" | translate }}</mat-label>
          <mat-select formControlName="sizeCategoryId">
            @for (size of sizeTypes(); track size.id) {
            <mat-option [value]="size.id">{{ size.size }}</mat-option>
            }
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="fill" class="w-full">
          <mat-icon matPrefix>book</mat-icon>
          <mat-label>{{ "bindingtype" | translate }}</mat-label>
          <mat-select formControlName="bindingTypeId">
            @for (type of availableBindingTypes(); track type.id) {
            <mat-option [value]="type.id">{{ type.name }}</mat-option>
            }
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="fill" class="w-full">
          <mat-icon matPrefix>description</mat-icon>
          <mat-label>{{ "papertype" | translate }}</mat-label>
          <mat-select formControlName="paperQuailtyId">
            @for (paper of availablePaperQualities(); track paper.id) {
            <mat-option [value]="paper.id">{{ paper.name }}</mat-option>
            }
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="fill" class="w-full">
          <mat-icon matPrefix>layers</mat-icon>
          <mat-label>{{ "laminationtype" | translate }}</mat-label>
          <mat-select formControlName="laminationTypeId">
            @for (lamination of availableLaminationTypes(); track lamination.id)
            {
            <mat-option [value]="lamination.id">{{
              lamination.name
            }}</mat-option>
            }
          </mat-select>
        </mat-form-field>
      </div>
    </div>

    <!-- Section: Other Options -->
    <div>
      <h3 class="text-base font-semibold mb-3 text-[var(--text-heading)]">
        Other Options
      </h3>
      <div class="grid gap-4 md:grid-cols-2">
        <div class="flex items-center gap-2 text-[0.95rem] text-[#0f172a]">
          <input
            type="checkbox"
            id="insideCover"
            formControlName="insideCover"
            class="w-[1.1rem] h-[1.1rem] cursor-pointer accent-[var(--primary)]"
          />
          <label for="insideCover" class="cursor-pointer select-none">
            {{ "isinsidecover" | translate }}
            @if (isSizeCategorySelected() && isSuperAdmin()) {
            <span class="text-sm text-gray-600">
              ({{ selectedSizeCategoryInsideCoverPrice() | currency : "INR" }})
            </span>
            }
          </label>
        </div>

        <div class="flex items-center gap-2 text-[0.95rem] text-[#0f172a]">
          <input
            type="checkbox"
            id="isColorPagesRandom"
            formControlName="isColorPagesRandom"
            class="w-[1.1rem] h-[1.1rem] cursor-pointer accent-[var(--primary)]"
          />
          <label for="isColorPagesRandom" class="cursor-pointer select-none">
            {{ "iscolorpagesrandom" | translate }}
          </label>
        </div>
      </div>
    </div>
  </form>

  @if (calculation()) {
  <div class="mt-6">
    <h3 class="text-base font-semibold mb-3 text-[var(--text-heading)]">
      Cost Breakdown
    </h3>
    <div
      class="border border-[#ceb8ef] rounded-xl p-4 bg-[var(--light-purple-bg)]"
    >
      <table class="w-full border-collapse">
        <tbody>
          <tr>
            <td
              class="py-2 border-b border-[rgba(61,26,93,0.1)] font-medium text-[#475569]"
            >
              Printing Per Item
            </td>
            <td
              class="py-2 border-b border-[rgba(61,26,93,0.1)] text-right font-semibold text-[var(--text-heading)]"
            >
              {{ calculation()?.printPerItem | currency : "INR" }}
            </td>
          </tr>
          <tr>
            <td
              class="py-2 border-b border-[rgba(61,26,93,0.1)] font-medium text-[#475569]"
            >
              Weight Per Item
            </td>
            <td
              class="py-2 border-b border-[rgba(61,26,93,0.1)] text-right font-semibold text-[var(--text-heading)]"
            >
              {{ calculation()?.deliveryWeightPerItem || "N/A" }} kg
            </td>
          </tr>
          <tr>
            <td
              class="py-2 border-b border-[rgba(61,26,93,0.1)] font-medium text-[#475569]"
            >
              Delivery Cost
            </td>
            <td
              class="py-2 border-b border-[rgba(61,26,93,0.1)] text-right font-semibold text-[var(--text-heading)]"
            >
              {{ calculation()?.deliveryCost | currency : "INR" }}
            </td>
          </tr>
          <tr>
            <td
              class="py-2 border-b border-[rgba(61,26,93,0.1)] font-medium text-[#475569]"
            >
              Total Weight
            </td>
            <td
              class="py-2 border-b border-[rgba(61,26,93,0.1)] text-right font-semibold text-[var(--text-heading)]"
            >
              {{ calculation()?.deliveryWeight || "N/A" }} kg
            </td>
          </tr>
          <tr>
            <td
              class="py-3 border-t-2 border-[#ceb8ef] font-medium text-[#475569] text-[1.05rem]"
            >
              Total Printing
            </td>
            <td
              class="py-3 border-t-2 border-[#ceb8ef] text-right font-semibold text-[var(--text-heading)] text-[1.05rem]"
            >
              {{ calculation()?.printCost | currency : "INR" }}
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
  }
</section>
