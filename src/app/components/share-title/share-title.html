<div class="flex flex-col gap-4 w-[500px] max-w-[90vw] p-6">
  <h2
    mat-dialog-title
    class="text-xl font-medium text-[var(--text-heading)] !text-primary mb-2"
  >
    {{ "sharetitle" | translate }}
  </h2>

  <mat-dialog-content class="!min-h-[120px]">
    <form [formGroup]="form" class="flex flex-col gap-4">
      <mat-form-field appearance="fill" class="w-full">
        <mat-icon matPrefix class="!text-gray-400 !text-lg">book</mat-icon>
        <mat-label class="!hidden">{{ "title" | translate }}</mat-label>
        <mat-select formControlName="titleId" [disabled]="isLoading()">
          @if (isLoading()) {
            <mat-option [value]="null" disabled>
              <div class="flex items-center gap-2">
                <span>{{ "loading" | translate }}...</span>
              </div>
            </mat-option>
          } @else {
            @for (title of titles(); track title.id) {
              <mat-option [value]="title.id">
                <div class="flex flex-col">
                  <span class="font-medium">{{ title.name }}</span>
                  <span class="text-xs text-[var(--text-secondary)]">{{
                    title.status | translate
                  }}</span>
                </div>
              </mat-option>
            }
          }
        </mat-select>
        @if (
          form.controls.titleId.hasError("required") &&
          form.controls.titleId.touched
        ) {
          <mat-error>{{ "titleisrequired" | translate }}</mat-error>
        }
      </mat-form-field>
      @if (titles().length === 0 && !isLoading()) {
        <div class="flex flex-col items-center justify-center py-4">
          <mat-icon class="text-[var(--text-secondary)] text-4xl mb-2"
            >book</mat-icon
          >
          <p class="text-sm text-[var(--text-secondary)] text-center">
            {{ "noapprovedtitlesavailable" | translate }}
          </p>
        </div>
      }
    </form>
  </mat-dialog-content>
  <mat-dialog-actions class="flex justify-end gap-2 !px-0 !pb-0">
    <button
      (click)="data.onClose()"
      mat-button
      matButton="filled"
      class="!bg-accent !text-white"
      type="button"
    >
      {{ "close" | translate }}
    </button>
    <button
      (click)="onSubmit()"
      mat-button
      matButton="filled"
      class="!bg-primary !text-white"
      type="button"
      [disabled]="!form.valid || isLoading()"
    >
      {{ "share" | translate }}
    </button>
  </mat-dialog-actions>
</div>
