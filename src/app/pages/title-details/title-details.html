<div class="p-4 rounded-md bg-[var(--surface)] min-h-screen">
  <div class="flex justify-between items-center mb-6">
    <h1 class="text-2xl font-semibold text-[var(--text-heading)]">
      My Book Titles
    </h1>
    <app-back></app-back>
  </div>

  @if (draftTitles().length > 0) { @for (title of draftTitles(); track title.id)
  {
  <div
    class="bg-white rounded-2xl shadow-sm border border-[var(--primary-superlight)] flex flex-col md:flex-row p-6 hover:shadow-lg transition-all mb-6"
  >
    <div
      class="w-[120px] h-[160px] bg-[var(--light-purple-bg)] rounded-lg flex items-center justify-center text-[var(--text-placeholder)] font-medium border border-[var(--primary-light)]"
    >
      COVER
    </div>

    <div class="flex-1 ml-6">
      <div class="flex justify-between items-start">
        <div>
          <h2 class="text-lg font-semibold text-[var(--text-heading)]">
            {{ title.name }}
          </h2>
          <p class="text-[var(--text-secondary)] text-sm">
            {{ title.category.name }} | {{ title.language | uppercase }} |
            {{ title.publishingType }}
          </p>
          <!-- ✅ ISBN Section -->
          <div class="mt-1 text-xs text-[var(--text-secondary)]">
            <p>
              <span class="font-medium">ISBN (Print):</span>
              {{ title.isbnPrint || "Not Assigned" }}
            </p>
            <p>
              <span class="font-medium">ISBN (eBook):</span>
              {{ title.isbnEbook || "Not Assigned" }}
            </p>
          </div>
        </div>

        <button
          mat-icon-button
          color="warn"
          matTooltip="Delete Title"
          (click)="deleteTitle(title.id)"
        >
          <mat-icon>delete_outline</mat-icon>
        </button>
      </div>

      <!-- Stepper (optional visualization) -->
      <div class="mt-4 flex items-center gap-6">
        <div class="flex items-center gap-2">
          <div
            class="w-8 h-8 flex items-center justify-center rounded-full bg-[var(--green-2)] text-white font-semibold"
          >
            1
          </div>
          <span class="text-[var(--text-heading)] font-medium text-sm"
            >Book Details</span
          >
        </div>
        <div class="flex-1 border-t border-[var(--primary-light)] mx-2"></div>
        <div class="flex items-center gap-2">
          <div
            class="w-8 h-8 flex items-center justify-center rounded-full bg-[var(--primary-superlight)] text-[var(--primary)] font-semibold"
          >
            2
          </div>
          <span class="text-[var(--text-secondary)] text-sm">Book Content</span>
        </div>
        <div class="flex-1 border-t border-[var(--primary-light)] mx-2"></div>
        <div class="flex items-center gap-2">
          <div
            class="w-8 h-8 flex items-center justify-center rounded-full bg-[var(--primary-superlight)] text-[var(--primary)] font-semibold"
          >
            3
          </div>
          <span class="text-[var(--text-secondary)] text-sm">Book Design</span>
        </div>
        <div class="flex-1 border-t border-[var(--primary-light)] mx-2"></div>
        <div class="flex items-center gap-2">
          <div
            class="w-8 h-8 flex items-center justify-center rounded-full bg-[var(--primary-superlight)] text-[var(--primary)] font-semibold"
          >
            4
          </div>
          <span class="text-[var(--text-secondary)] text-sm"
            >Book Distribution</span
          >
        </div>
      </div>

      <div class="mt-6">
        <button
          mat-flat-button
          class="!bg-primary !text-white font-medium !px-8 !py-2 !rounded-lg shadow-lg hover:!bg-[var(--purple)]"
        >
          Continue Publishing →
        </button>
      </div>
    </div>
  </div>
  } }

  <!-- ========== Published Titles (Grid View) ========== -->
  <div
    class="mt-8 grid gap-6 sm:grid-cols-1 md:grid-cols-2 xl:grid-cols-3 transition-all"
  >
    @for (title of publishedTitles(); track title.id) {
    <div
      class="bg-white rounded-2xl shadow-sm border border-[var(--primary-superlight)] p-5 hover:shadow-lg transition-all flex flex-col"
    >
      <div class="flex items-center gap-4">
        <div
          class="w-[100px] h-[140px] bg-[var(--light-purple-bg)] rounded-md flex items-center justify-center text-[var(--text-placeholder)] font-medium border border-[var(--primary-light)]"
        >
          COVER
        </div>
        <div>
          <h3 class="text-[var(--text-heading)] font-semibold text-base">
            {{ title.name }}
          </h3>
          <p class="text-[var(--text-secondary)] text-sm mb-2">
            {{ title.category.name }} | {{ title.language | uppercase }} |
            {{ title.publishingType }}
          </p>
          <p class="text-[var(--text-secondary)] text-sm mb-2">
            Status: {{ title.status }}
          </p>
          <!-- ✅ ISBN Section -->
          <div class="text-xs text-[var(--text-secondary)] mb-2">
            <p>
              <span class="font-medium">ISBN (Print):</span>
              {{ title.isbnPrint || "Not Assigned" }}
            </p>
            <p>
              <span class="font-medium">ISBN (eBook):</span>
              {{ title.isbnEbook || "Not Assigned" }}
            </p>
          </div>

          <mat-progress-bar
            mode="determinate"
            [value]="title.totalSales / 100"
            class="!h-2 !rounded-full"
          ></mat-progress-bar>
        </div>
      </div>
      <button
        mat-stroked-button
        class="!border-[var(--primary-light)] hover:!text-[var(--primary)] mt-4 rounded-lg !bg-primary !text-white hover:!bg-[var(--primary-superlight)] transition-all"
      >
        View Details
      </button>
    </div>
    }
  </div>
</div>
